[{"id":0,"href":"/bitpay/","title":"Bitpay","parent":"","content":""},{"id":1,"href":"/bitpay/post/","title":"Post","parent":"Bitpay","content":""},{"id":2,"href":"/bitpay/post/Trade/","title":"交易文档","parent":"Post","content":"  请求地址： https://www.mercadosuperfast.com/Pay.html\n  请求类型： POST\n  请求参数：\n     变量名称 参数名称 是否必填 是否参与签名 参数说明     version 版本号 是 是 固定值：1.0.0   memberid 商户号 是 是 系统分配的商户编号，例如：10001   orderid 商户订单号 是 是 商户订单号，长度32个字符以内，只许包含大小写英文字母、数字和下划线（_）   amount 订单金额 是 是 交易订单金额，单位：分   orderdatetime 订单提交时间 是 是 格式：YYYY-mm-dd H:i:s 例如：2020-02-02 20:20:20   paytype 通道编码 是 是 联系客户获取   notifyurl 异步回调地址 是 是 支付成功后系统异步回调商户的地址   callbackurl 同步跳转地址 否 否 支付成功后系统同步跳转商户的地址   extend 扩展字段 否 否 异步回调/同步跳转时会原值返回   nome 姓名 否 否 如果为巴西通道时必填   cpf CPF或CNPJ 否 否 如果为巴西通道时必填   signmethod 签名类型 是 是 固定值: md5   sign md5签名 是 否 请看签名算法    交易请求Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = [ \u0026#39;version\u0026#39; =\u0026gt; \u0026#39;1.0.0\u0026#39;, \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;10001\u0026#39;, \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#34;1000120200202202020\u0026#34;, \u0026#39;amount\u0026#39; =\u0026gt; \u0026#39;100\u0026#39;, \u0026#39;orderdatetime\u0026#39; =\u0026gt; \u0026#34;\u0026#34;, \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, \u0026#39;paytype\u0026#39; =\u0026gt; \u0026#39;WXGZH\u0026#39;, \u0026#39;signmethod\u0026#39; =\u0026gt; \u0026#39;md5\u0026#39;, ]; ksort($ArrayField); //按照参数名ASCII码从小到大排序  $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //md5密钥  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  $tjurl = https://www.mercadosuperfast.com/Pay.htmll\u0026#39;; $str = \u0026#39;\u0026lt;form id=\u0026#34;Form1\u0026#34; name=\u0026#34;Form1\u0026#34; method=\u0026#34;post\u0026#34; action=\u0026#34;\u0026#39; . $tjurl. \u0026#39;\u0026#34;\u0026gt;\u0026#39;; foreach ($ArrayField as $key =\u0026gt; $val) { $str = $str . $key . \u0026#39;：\u0026#39; . $val . \u0026#39;\u0026lt;br /\u0026gt;\u0026lt;input type=\u0026#34;hidden\u0026#34; name=\u0026#34;\u0026#39; . $key. \u0026#39;\u0026#34; value=\u0026#34;\u0026#39; . $val. \u0026#39;\u0026#34;\u0026gt;\u0026#39;; } $str = $str . \u0026#39;\u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;submit\u0026#34;\u0026gt;\u0026#39;; $str = $str . \u0026#39;\u0026lt;/form\u0026gt;\u0026#39;; $str = $str . \u0026#39;\u0026lt;script\u0026gt;\u0026#39;; $str = $str . \u0026#39;document.Form1.submit();\u0026#39;; $str = $str . \u0026#39;\u0026lt;/script\u0026gt;\u0026#39;; echo($str); ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       回调参数    异步回调和同步跳转都是POST，参数都是一样的。\n如果接收到系统异步回调时，在页面输出“OK”（没有双引号，OK 两个字母大写）,否则会不定时重复发起回调请求。\n   变量名称 参数名称 是否参与签名 参数说明     version 版本号 是 固定值：1.0.0   memberid 商户号 是 系统分配的商户编号，例如：10001   amount 订单金额 是 订单提交的金额，单位：分   true_amount 实际支付金额 是 实际支付金额，单位：分。注：有时系统可能会对提交的整数金额随机加上一个几分钱的零头，所以可能会出现订单金额与实际支付金额不一样的情况，绝大部分情况下这两个金额是一致的   amount_trade 交易手续费 是 当前订单扣除的手续费，单位：分   orderid 商户订单号 是 商户提交给系统的订单号   sysorderid 系统订单号 是 系统生成的内部订单号   submitime 提交时间 是 订单提交建立的时间。格式：YYYY-mm-dd HH:ii:ss 例如：2020-02-02 20:20:20   successtime 交易成功时间 是 订单交易成功的时间。格式：YYYY-mm-dd HH:ii:ss 例如：2020-02-02 20:20:20   tongdao 交易通道编码 是 联系客户获取   status 订单关状态 是 success 成功，error 失败   signmethod 签名类型 是 固定值：md5   extend 扩展字段 如果存在此参数就参与签名 原值返回提交时的extend 字段的值   sign md5签名 否 请看签名算法    回调Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = $_POST; $sign = $ArrayField[\u0026#34;sign\u0026#34;]; unset($ArrayField[\u0026#34;sign\u0026#34;]); $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //密钥  ksort($ArrayField); //按照参数名ASCII码从小到大排序  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $signValue = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  if($signValue == $sign and $ArrayField[\u0026#34;status\u0026#34;] == \u0026#34;success\u0026#34;){ //建议在收到回调，验签通过且状态为成功时，再调查询接口查询一下订单的状态是否正的为成功后，再来处理自己的业务逻辑  // 交易成功后的业务逻辑处理  exit(\u0026#39;OK\u0026#39;); } ?\u0026gt;  Python  Python Demo      Shell  Shell Demo        建议在收到回调，验签通过且状态为成功时，再调取查询接口查询一下订单的状态是否真的为成功后，再来处理自己的业务逻辑\n 附录：    巴西测试账号:\n登陆地址： http://www.XXX.com\n账号：asd 、登陆密码：123456、 管理密码：123456\n商户号：10007\n密钥：5U4ZCLP9TX1FIJOG1E\n通道编码 1005\n 印度测试账号:\n登陆地址： http://www.XXX.com\n账号：qwe 、登陆密码：123456、 管理密码：123456\n商户号：10002\n密钥：09YH7EL53OXAFJPM16\n通道编码 1006\n 南非测试账号:\n登陆地址： http://www.XXX.com\n账号：nfceshi 、登陆密码：123456、 管理密码：123456\n商户号：10183\n密钥：FO6327GTICHM4EQY50\n通道编码 1007\n"},{"id":3,"href":"/bitpay/post/Pay/","title":"代付文档","parent":"Post","content":"  请求URL: https://www.bitpay.com/daifu/Transfer/index\n  请求方式： POST\nContent-Type: application/json\n     参数名 必填 签名 描述     memberid 是 是 商户号   orderid 是 是 商户订单号   amount 是 是 订单金额，单位 元   orderdatetime 是 是 订单提交时间，格式：YYYY-mm-dd HH:ii:ss 例如：2020-02-02 20:20:20   currency 是 是 币种 （巴西）brl、（墨西哥）mxn、（印度）inr 、（南非）zar   notifyurl 是 是 回调通知地址   data 是 是 代付信息数据，具体见最下面附录   remarks 否 否 扩展字段   sign 否 否 md5签名，签名算法在下面：      签名算法:\n签名生成的通用步骤如下：\n  设（除 data、remarks、sign 以外）数据为集合M，将集合M内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringA。\n  设 data 数据为集合O，将集合O内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringB。data 里的所有参数（包括为空的参数）都参与签名\n  将 stringA 与 stringB 通过 \u0026amp; 符号（stringA + \u0026amp; + stringB）连接成字符串 stringC。\n  在stringC最后拼接上key（签名密钥）得到stringSign（stringC + key）字符串，并对stringSign进行MD5运算，再将得到的字符串所有字符转换为大写。\n    Demo代码：     PHP  PHP Demo    function https_request($url, $data = null) { $curl = curl_init(); curl_setopt_array($curl, array( CURLOPT_URL =\u0026gt; $url, CURLOPT_RETURNTRANSFER =\u0026gt; true, CURLOPT_ENCODING =\u0026gt; \u0026#39;\u0026#39;, CURLOPT_MAXREDIRS =\u0026gt; 10, CURLOPT_TIMEOUT =\u0026gt; 0, CURLOPT_FOLLOWLOCATION =\u0026gt; true, CURLOPT_HTTP_VERSION =\u0026gt; CURL_HTTP_VERSION_1_1, CURLOPT_CUSTOMREQUEST =\u0026gt; \u0026#39;POST\u0026#39;, CURLOPT_POSTFIELDS =\u0026gt; json_encode($data,true), CURLOPT_HTTPHEADER =\u0026gt; array( \u0026#39;Content-Type: application/json\u0026#39;, ), )); $response = curl_exec($curl); curl_close($curl); return $response; } ​ $ArrayField = [ \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;xxxxxx\u0026#39;, \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#39;xxxxxx\u0026#39;, \u0026#39;amount\u0026#39; =\u0026gt; \u0026#34;100.12\u0026#34;, \u0026#39;currency\u0026#39; =\u0026gt; \u0026#39;brl\u0026#39;, \u0026#39;orderdatetime\u0026#39; =\u0026gt; \u0026#34;2020-02-02 12:12:12\u0026#34;, \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, ]; ​ ksort($ArrayField); //按照参数名ASCII码从小到大排序 $stringA = urldecode(http_build_query($ArrayField)); ​ $data = [ \u0026#39;param1\u0026#39; =\u0026gt; \u0026#39;xxxx\u0026#39;, \u0026#39;param2\u0026#39; =\u0026gt; \u0026#39;xxxx\u0026#39;, \u0026#39;param3\u0026#39; =\u0026gt; \u0026#39;xxxx\u0026#39;, \u0026#39;param4\u0026#39; =\u0026gt; \u0026#39;xxxx\u0026#39;, \u0026#39;param5\u0026#39; =\u0026gt; \u0026#39;xxxx\u0026#39;, ]; ​ ksort($data); //按照参数名ASCII码从小到大排序 $stringB = urldecode(http_build_query($data)); ​ $stringC = $stringA.\u0026#39;\u0026amp;\u0026#39;.$stringB; ​ $md5key = \u0026#39;xxxxxxxxxxx\u0026#39;; //md5密钥 ​ //拼接密钥后，md5加密后转为大写 $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringC.$md5key)); $ArrayField[\u0026#34;data\u0026#34;] = $data; $ArrayField[\u0026#39;remarks\u0026#39;] = \u0026#39;bitpay\u0026#39;; ​ $req = https_request(\u0026#34;https://www.mercadosuperfast.com/daifu/Transfer/index\u0026#34;,$ArrayField);   Python  Python Demo      Shell  Shell Demo        响应参数  响应参数以 json字符串的返回\n   变量名称 参数名称 参数说明     status 状态 00为提交成功，其它的为提交的失败   msg 说明 如果状态为提交失败，这里会有失败说明   ordermoney 代付金额 代付金额，单位：元   userordernumer 用户代付订单号 商户提交的代付订单号   sysordernumber 系统订单号 系统生成的代付订单号   remarks 扩展字段 原值返回提交时的attach字段的值    回调通知     通知类型 ：POST     变量名称 参数名称 是否参与签名 参数说明     status 状态 是 00为提交成功，其它的为提交的失败   msg 说明 是 如果状态为提交失败，这里会有失败说明   ordermoney 代付金额 是 代付金额，单位：元   userordernumer 用户代付订单号 是 商户提交的代付订单号   remarks 扩展字段 否 原值返回提交时的attach字段的值   sign 签名 否 签名算法如下：    如果接收到系统异步回调时，在页面输出“SUCCESS”。\n 签名算法:    设（除 sign 以外，值为空的参数也要参与签名）数据为集合M，将集合M内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringA。\n  在stringA最后拼接上\u0026amp;key=MD5密钥（签名密钥）得到stringSign（stringA+\u0026amp;key=MD5密钥）字符串，并对stringSign进行MD5运算，不要转大写！不要转大写！不要转大写。\n  Demo代码：     PHP  PHP Demo    \u0026lt;?php ​ $ArrayField = $_POST; ​ $sign = $ArrayField[\u0026#34;sign\u0026#34;]; ​ unset($ArrayField[\u0026#34;sign\u0026#34;]); ​ $md5key = \u0026#39;XXXXXXXXXXXXXXX\u0026#39;; //密钥 ​ ksort($ArrayField); //按照参数名ASCII码从小到大排序 ​ $stringA = urldecode(http_build_query($ArrayField)); ​ $signValue = md5($stringA.\u0026#34;\u0026amp;key=\u0026#34;.$md5key); //拼接密钥后，md5加密后转为大写 ​ if($signValue == $sign and $ArrayField[\u0026#34;status\u0026#34;] == \u0026#34;00\u0026#34;){ // 交易成功后的业务逻辑处理  exit(\u0026#39;SUCCESS\u0026#39;); } ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       代付查询接口：      请求URL: https://www.mercadosuperfast.com/daifu/Transfer/query\n  请求方式：POST\n  请求参数：\n     变量名称 参数名称 是否必填 参数说明     member 商户号 是 系统分配的商户编号，例如：10001   userordernumber 商户订单号 是 商户订单号（可为空，但是不能与系统订单同时为空）   sign md5签名 是 MD5签名      签名算法:\n  设（除 sign 以外，值为空的参数也要参与签名）数据为集合M，将集合M内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringA。\n  在stringA最后拼接上\u0026amp;key=MD5密钥（签名密钥）得到stringSign（stringA+\u0026amp;key=MD5密钥）字符串，并对stringSign进行MD5运算，不要转大写！不要转大写！不要转大写。\n    Demo代码：     PHP  PHP Demo    \u0026lt;?php ​ function https_request($url, $data = null) { $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); if (!empty($data)) {//如果有数据传入数据  curl_setopt($curl, CURLOPT_POST, 1);//CURLOPT_POST 模拟post请求  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);//传入数据  } curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); $output = curl_exec($curl); curl_close($curl); return $output; } ​ $ArrayField = [ \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;xxxxxxxxx\u0026#39;, //固定值  \u0026#39;userordernumber\u0026#39; =\u0026gt; \u0026#39;xxxxxxxxxxxxxx\u0026#39;, //商户订单 ]; ​ ksort($ArrayField); //按照参数名ASCII码从小到大排序 ​ $md5key = \u0026#39;xxxxxxxxxxxxxx\u0026#39;; //md5密钥 ​ $stringA = urldecode(http_build_query($ArrayField)); ​ $ArrayField[\u0026#34;sign\u0026#34;] = md5($stringA.\u0026#34;\u0026amp;key=\u0026#34;.$md5key); //拼接密钥后，md5加密后转为大写 ​ $tjurl = \u0026#39;https://www.mercadosuperfast.com/daifu/Transfer/query\u0026#39;; ​ $json = https_request($url,$ArrayField); ​ ?\u0026gt;  Python  Python Demo      Shell  Shell Demo        响应参数     参数名 参数含义 是否参与签名 说明     code 响应状态 是 0 成功，1有错误   status 订单状态 是 00 代付成功, 01处理中，02 未处理，03 已退款， 04 代付失败   msg 返回说明 是 错误说明   userordernumber 用户上传订单号 是 用户上传的唯一订单号,订单申请成功返回   ordermoney 订单金额 是 代付订单金额,订单申请成功返回   remarks 注释 是 用户上传的订单注释,订单申请成功返回   sign 签名  签名      签名算法:\n  设（除 sign 以外，值为空的参数也要参与签名）数据为集合M，将集合M内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringA。\n  在stringA最后拼接上\u0026amp;key=MD5密钥（签名密钥）得到stringSign（stringA+\u0026amp;key=MD5密钥）字符串，并对stringSign进行MD5运算，不要转大写！不要转大写！不要转大写。\n     附录：    代付 Data 详细数据     印度代付 ↕  印度代付 data 详细数据       参数名 说明     type 代付类型 ，固定值 ，UPI 或 BANK   accountname 收款人姓名   upinumer UPI账号   mobile 收款人手机号   email 收款人email   bankname 银行名称   bankcardnumber 银行卡收款账号   ifsc IFSC号       巴西代付 ↕  巴西代付 data 详细数据       参数名 说明     pixnumber PIX账号   pixtype PIX账号类型（CPF、CPNJ、PHONE、EMAIL）   pixconta 银行账号，不是银行卡号，例如：876543-2   pixagencia 银行机构代码，例如：1234-5   pixbanco 银行代码（3位数字）   ispb 银行ISPB码（8位数字）   name 开户人姓名 例如： Tom   cpfnumber CPF号（格式化后的11位数字）       南非代付 ↕  南非代付 data 详细数据       参数名 说明     name 姓名   bankcardnumber 银行账号       墨西哥代付 ↕  墨西哥代付 data 详细数据       参数名 说明     bankname 银行名称   bankcode 银行编码（数字）   idnumber 收款人证件号码(curp)   accountname 银行卡开户人姓名   accountno 银行卡账号   phone 手机号      "},{"id":4,"href":"/bitpay/post/Signature/","title":"签名算法","parent":"Post","content":"签名生成的通用步骤：\n 设所有发送或者接收到的数据为集合M，将集合M内的参数按照参数名ASCII码从小到大排序（字典序），使用URL键值对的格式（即key1=value1\u0026amp;key2=value2…）拼接成字符串 stringA。 在stringA最后拼接上key得到stringSign字符串，并对stringSign进行MD5运算，再将得到的字符串所有字符转换为大写。  交易提交时签名Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = [ \u0026#39;version\u0026#39; =\u0026gt; \u0026#39;1.0.0\u0026#39;, \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;10001\u0026#39;, \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#34;1000120200202202020\u0026#34;, \u0026#39;amount\u0026#39; =\u0026gt; \u0026#39;100\u0026#39;, \u0026#39;orderdatetime\u0026#39; =\u0026gt; \u0026#34;\u0026#34;, \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, \u0026#39;paytype\u0026#39; =\u0026gt; \u0026#39;WXGZH\u0026#39;, \u0026#39;signmethod\u0026#39; =\u0026gt; \u0026#39;md5\u0026#39;, ]; ksort($ArrayField); //按照参数名ASCII码从小到大排序  $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //md5密钥  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       交易回调时签名Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = $_POST; $sign = $ArrayField[\u0026#34;sign\u0026#34;]; unset($ArrayField[\u0026#34;sign\u0026#34;]); $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //密钥  ksort($ArrayField); //按照参数名ASCII码从小到大排序  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $signValue = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  ?\u0026gt;  Python  Python Demo      Shell  Shell Demo        回调里的所有参数，只要存在，不论值是否为空都要参与签名\n 查询提交时签名Demo     PHP  PHP Demo    $ArrayField = [ \u0026#39;version\u0026#39; =\u0026gt; \u0026#39;1.0.0\u0026#39;, //固定值  \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;10001\u0026#39;, //商户编号  \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#34;2020022637021582687627\u0026#34;, //要查询的订单号  \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, \u0026#39;signmethod\u0026#39; =\u0026gt; \u0026#39;md5\u0026#39;, //加密方式 固定值 ]; ksort($ArrayField); //按照参数名ASCII码从小到大排序  $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //md5密钥  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写    Python  Python Demo      Shell  Shell Demo       查询响应/回调时签名Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = $_POST; //查询回调时获取回调参数  // $json = 响应回的JSON字符串 ; // $ArrayField = json_decode($json,true) //查询响应时获取回调参数, json字符串转换为数组  $sign = $ArrayField[\u0026#34;sign\u0026#34;]; unset($ArrayField[\u0026#34;sign\u0026#34;]); $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //密钥  ksort($ArrayField); //按照参数名ASCII码从小到大排序  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $signValue = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  ?\u0026gt;  Python  Python Demo      Shell  Shell Demo        回调里的所有参数，只要存在，不论值是否为空都要参与签名\n "},{"id":5,"href":"/bitpay/post/Inquiry/","title":"查询文档","parent":"Post","content":"  请求地址： https://www.mercadosuperfast.com/Pay.html\n  请求类型： POST\n  请求参数：\n     变量名称 参数名称 是否必填 是否参与签名 参数说明     version 版本号 是 是 固定值：1.0.0   memberid 商户号 是 是 系统分配的商户编号，例如：10001   orderid 商户订单号 是 是 要查询的商户订单号   notifyurl 异步回调地址 是 是 支付成功后系统异步回调商户的地址   query 查询标识 是 否 固定值：query   signmethod 签名类型 是 是 固定值: md5   sign md5签名 是 否 请看签名算法    查询请求Demo     PHP  PHP Demo    \u0026lt;?php function https_request($url, $data = null) { $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); if (!empty($data)) {//如果有数据传入数据  curl_setopt($curl, CURLOPT_POST, 1);//CURLOPT_POST 模拟post请求  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);//传入数据  } curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); $output = curl_exec($curl); curl_close($curl); return $output; } $ArrayField = [ \u0026#39;version\u0026#39; =\u0026gt; \u0026#39;1.0.0\u0026#39;, //固定值  \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;10001\u0026#39;, //商户编号  \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#34;2020022637021582687627\u0026#34;, //要查询的订单号  \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, \u0026#39;signmethod\u0026#39; =\u0026gt; \u0026#39;md5\u0026#39;, //加密方式 固定值 ]; ksort($ArrayField); //按照参数名ASCII码从小到大排序  $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //md5密钥  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  $ArrayField[\u0026#34;query\u0026#34;] = \u0026#39;query\u0026#39;; //加上查询标识字段  $tjurl = \u0026#39;http://xxx.xxx.com/pay.html\u0026#39;; https_request($url,$ArrayField); ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       响应/回调参数    查询请求提交成功后，会马上收到一个响应，同时会给异步回调地址发送一个异步回调。\n响应和回调的参数都是一样的，只是响应回的是JSON的字符串，异步回调是POST的Form表单回调。\n   变量名称 参数名称 是否参与签名 参数说明     version 版本号 是 固定值：1.0.0   memberid 商户号 是 系统分配的商户编号，例如：10001   amount 订单金额 是 订单提交的金额，单位：分   true_amount 实际支付金额 是 实际支付金额，单位：分。注：有时系统可能会对提交的整数金额随机加上一个几分钱的零头，所以可能会出现订单金额与实际支付金额不一样的情况，绝大部分情况下这两个金额是一致的   orderid 商户订单号 是 商户提交给系统的订单号   sysorderid 系统订单号 是 系统生成的内部订单号   submitime 提交时间 是 订单提交建立的时间。格式：YYYY-mm-dd HH:ii:ss 例如：2020-02-02 20:20:20   successtime 交易成功时间 是 订单交易成功的时间。格式：YYYY-mm-dd HH:ii:ss 例如：2020-02-02 20:20:20   status 订单关状态 是 success 成功，error 失败   signmethod 签名类型 是 固定值：md5   sign md5签名 否 请看签名算法    查询响应Demo     PHP  PHP Demo    \u0026lt;?php function https_request($url, $data = null) { $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, $url); curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($curl, CURLOPT_SSL_VERIFYHOST, false); if (!empty($data)) {//如果有数据传入数据  curl_setopt($curl, CURLOPT_POST, 1);//CURLOPT_POST 模拟post请求  curl_setopt($curl, CURLOPT_POSTFIELDS, $data);//传入数据  } curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1); $output = curl_exec($curl); curl_close($curl); return $output; } $ArrayField = [ \u0026#39;version\u0026#39; =\u0026gt; \u0026#39;1.0.0\u0026#39;, //固定值  \u0026#39;memberid\u0026#39; =\u0026gt; \u0026#39;10001\u0026#39;, //商户编号  \u0026#39;orderid\u0026#39; =\u0026gt; \u0026#34;2020022637021582687627\u0026#34;, //要查询的订单号  \u0026#39;notifyurl\u0026#39; =\u0026gt; \u0026#39;http://xxx.xxx.com/notifyurl.php\u0026#39;, \u0026#39;signmethod\u0026#39; =\u0026gt; \u0026#39;md5\u0026#39;, //加密方式 固定值 ]; ksort($ArrayField); //按照参数名ASCII码从小到大排序  $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //md5密钥  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $ArrayField[\u0026#34;sign\u0026#34;] = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  $ArrayField[\u0026#34;query\u0026#34;] = \u0026#39;query\u0026#39;; //加上查询标识字段  $tjurl = \u0026#39;http://xxx.xxx.com/Pay.html\u0026#39;; $json = https_request($url,$ArrayField); $ArrayField = json_decode($json,true) //查询响应时获取回调参数, json字符串转换为数组  $sign = $ArrayField[\u0026#34;sign\u0026#34;]; unset($ArrayField[\u0026#34;sign\u0026#34;]); $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //密钥  ksort($ArrayField); //按照参数名ASCII码从小到大排序  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $signValue = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  if($sign == $signValue \u0026amp;\u0026amp; $ArrayField[\u0026#39;status\u0026#39;] == \u0026#39;success\u0026#39;){ // 查询到订单的状态是成功的 }else{ var_dump($ArrayField); } ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       查询回调Demo     PHP  PHP Demo    \u0026lt;?php $ArrayField = _POST; $sign = $ArrayField[\u0026#34;sign\u0026#34;]; unset($ArrayField[\u0026#34;sign\u0026#34;]); $md5key = \u0026#39;2JXQBG13TAUNKRYVME\u0026#39;; //密钥  ksort($ArrayField); //按照参数名ASCII码从小到大排序  $stringA = \u0026#34;\u0026#34;; foreach($ArrayField as $key =\u0026gt; $value){ $stringA .= $key.\u0026#34;=\u0026#34;.$value.\u0026#34;\u0026amp;\u0026#34;; } $stringA = substr($stringA,0,-1); //去掉最后一个 \u0026amp; 字符  $signValue = strtoupper(md5($stringA.$md5key)); //拼接密钥后，md5加密后转为大写  if($sign == $signValue \u0026amp;\u0026amp; $ArrayField[\u0026#39;status\u0026#39;] == \u0026#39;success\u0026#39;){ // 查询到订单的状态是成功的 }else{ var_dump($ArrayField); } ?\u0026gt;  Python  Python Demo      Shell  Shell Demo       "},{"id":6,"href":"/bitpay/tags/","title":"Tags","parent":"Bitpay","content":""}]